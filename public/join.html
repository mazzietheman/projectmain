<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Join Us - Green Earth Project</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<style>
			/* Style inputs */
			input[type="text"],
			select {
				width: 100%;
				padding: 12px 20px;
				margin: 8px 0;
				display: inline-block;
				border: 1px solid #ccc;
				border-radius: 4px;
				box-sizing: border-box;
			}

			/* Style the submit button */
			input[type="submit"] {
				width: 100%;
				background-color: #04aa6d;
				color: white;
				padding: 14px 20px;
				margin: 8px 0;
				border: none;
				border-radius: 4px;
				cursor: pointer;
			}

			/* Add a background color to the submit button on mouse-over */
			input[type="submit"]:hover {
				background-color: #45a049;
			}
		</style>
	</head>

	<body>
		<nav
			class="navbar navbar-expand-md navbar-light bg-light"
			aria-label="Fourth navbar example"
		>
			<div class="container-fluid">
				<a class="navbar-brand" href="index.html"> Green Earth</a>

				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarsExample04"
					aria-controls="navbarsExample04"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarsExample04">
					<ul class="navbar-nav me-auto mb-2 mb-md-0">
						<li class="nav-item">
							<a
								href="index.html"
								class="nav-link"
								aria-current="page"
								href="#"
								>Home</a
							>
						</li>
						<li class="nav-item">
							<a href="aboutus.html" class="nav-link" href="#"
								>About Us</a
							>
						</li>
						<li class="nav-item">
							<a href="communitychallenge.html" class="nav-link"
								>Community</a
							>
						</li>
						<li class="nav-item">
							<a href="login.html" class="nav-link">Log In</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="container">
			<div class="py-5 text-center">
				<h2>Join Us</h2>
				<p class="lead">Become a Part of Our Mission!</p>
				<p id="error-message" style="color: red"></p>
			</div>

			<div class="row">
				<div class="col-md-2"></div>

				<div class="col-md-8">
					<form id="join-form">
						<div class="mb-3">
							<label class="form-label" for="firstname"
								>Firstname:</label
							>
							<input
								class="form-control"
								type="text"
								id="firstname"
								name="firstname"
								required
							/>
						</div>

						<div class="mb-3">
							<label class="form-label" for="lastname">
								Lastname:</label
							>
							<input
								class="form-control"
								type="text"
								id="lastname"
								name="lastname"
								required
							/>
						</div>

						<div class="mb-3">
							<label class="form-label" for="username"
								>Username:</label
							>
							<input
								class="form-control"
								type="text"
								id="username"
								name="username"
								required
							/>
						</div>

						<div class="mb-3">
							<label class="form-label" for="email">Email:</label>
							<input
								class="form-control"
								type="email"
								id="email"
								name="email"
								required
							/>
						</div>

						<label for="city">City</label>
						<select id="city" name="city">
							<option value="Jakarta">Jakarta</option>
							<option value="Bandung">Bandung</option>
							<option value="Jogja    ">Jogja</option>
						</select>

						<div class="mb-3">
							<label class="form-label" for="password"
								>Password:</label
							>
							<input
								class="form-control"
								type="password"
								id="password"
								name="password"
								required
							/>
						</div>

						<div class="mb-3">
							<div class="show-password">
								<input
									class="form-check-input"
									type="checkbox"
									id="showPassword"
								/>
								<label for="showPassword">Show Password</label>
							</div>
						</div>

						<div class="mb-3">
							<label class="form-label" for="message"
								>Message:</label
							>
							<textarea
								class="form-control"
								id="message"
								name="message"
							></textarea>
						</div>

						<div class="mb-3">
							<button
								class="form-control btn btn-success"
								type="submit"
							>
								Join Now
							</button>
						</div>
					</form>
				</div>

				<div class="col-md-2"></div>
			</div>
		</div>

		<div class="container-fluid bg-dark text-bg-dark mt-5">
			<div class="container">
				<footer class="py-5">
					<div class="row">
						<div class="col-6 col-md-2 mb-3">
							<h5>Section</h5>
							<ul class="nav flex-column">
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
							</ul>
						</div>

						<div class="col-6 col-md-2 mb-3">
							<h5>Section</h5>
							<ul class="nav flex-column">
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
							</ul>
						</div>

						<div class="col-6 col-md-2 mb-3">
							<h5>Section</h5>
							<ul class="nav flex-column">
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
								<li class="nav-item mb-2">
									<a
										href="#"
										class="nav-link p-0 text-white"
									></a>
								</li>
							</ul>
						</div>

						<div class="col-md-5 offset-md-1 mb-3">
							<form>
								<h5></h5>
								<p></p>
							</form>
						</div>
					</div>

					<div
						class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top"
					>
						<p>Â© 2023 Green Earth Project. All rights reserved</p>
						<ul class="list-unstyled d-flex">
							<li class="ms-3">
								<a class="link-body-emphasis" href="#"
									><svg class="bi" width="24" height="24">
										<use xlink:href="#twitter"></use></svg
								></a>
							</li>
							<li class="ms-3">
								<a class="link-body-emphasis" href="#"
									><svg class="bi" width="24" height="24">
										<use xlink:href="#instagram"></use></svg
								></a>
							</li>
							<li class="ms-3">
								<a class="link-body-emphasis" href="#"
									><svg class="bi" width="24" height="24">
										<use xlink:href="#facebook"></use></svg
								></a>
							</li>
						</ul>
					</div>
				</footer>
			</div>
		</div>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"
		></script>

		<script>
			// Get the checkbox and password input elements
			const showPasswordCheckbox =
				document.getElementById("showPassword");
			const passwordInput = document.getElementById("password");

			// Add an event listener to the checkbox
			showPasswordCheckbox.addEventListener("change", function () {
				// Toggle the type of the password input between 'password' and 'text'
				if (this.checked) {
					passwordInput.type = "text"; // Show password
				} else {
					passwordInput.type = "password"; // Hide password
				}
			});

			document
				.getElementById("join-form")
				.addEventListener("submit", async function (event) {
					event.preventDefault();

					const username = document.getElementById("username").value;
					const email = document.getElementById("email").value;
					const city = document.getElementById("city").value;
					const password = document.getElementById("password").value;
					const errorMessage =
						document.getElementById("error-message");

					// Clear previous error message
					errorMessage.textContent = "";

					// Check if all fields are filled
					if (!username || !email || !city || !password) {
						errorMessage.textContent = "All fields are required.";
					} else {
						const formData = new FormData(this);
						const data = Object.fromEntries(formData.entries());

						const response = await fetch(
							"http://localhost:3000/auth/join",
							{
								method: "POST",
								headers: {
									"Content-Type": "application/json",
									Accept: "application/json",
								},
								body: JSON.stringify(data),
							}
						)
							.then(function (response) {
								return response.json();
							})
							.then(function (res) {
								if (res.success) {
									alert(
										"Thank you for joining us! Please verify your email."
									);
									localStorage.setItem("email", data.email); // Store email in local storage
									window.location.href = "verify.html"; // Redirect to verify.html
								} else {
									alert(res.message);
								}
							});
					}
				});
		</script>
	</body>
</html>
